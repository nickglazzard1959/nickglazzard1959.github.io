!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("babylonjs")):"function"==typeof define&&define.amd?define("babylonjs-serializers",["babylonjs"],t):"object"==typeof exports?exports["babylonjs-serializers"]=t(require("babylonjs")):e.SERIALIZERS=t(e.BABYLON)}("undefined"!=typeof self?self:"undefined"!=typeof global?global:this,(e=>(()=>{"use strict";var t={597:t=>{t.exports=e}},r={};function o(e){var i=r[e];if(void 0!==i)return i.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{o.d(i,{default:()=>u});var e={};o.r(e),o.d(e,{OBJExport:()=>n});var t={};o.r(t),o.d(t,{OBJExport:()=>n});var r=o(597),n=function(){function e(){}return e.OBJ=function(e,t,o,i){var n,a,s,u=[],l=1,d=1;t&&(o||(o="mat"),u.push("mtllib "+o+".mtl"));for(var p=0;p<e.length;p++){var f=e[p],m=f.name||"mesh".concat(p,"}");u.push("o ".concat(m));var c=null;if(i){var h=f.computeWorldMatrix(!0);c=new r.Matrix,h.invertToRef(c),f.bakeTransformIntoVertices(h)}if(t){var b=f.material;b&&u.push("usemtl "+b.id)}var v=f.geometry;if(v){var x=v.getVerticesData("position"),g=v.getVerticesData("normal"),y=v.getVerticesData("uv"),T=v.getIndices(),S=0,j=0;if(x&&T){for(var F=e[0].getScene().useRightHandedSystem?1:-1,O=0;O<x.length;O+=3)u.push("v "+x[O]*F+" "+x[O+1]+" "+x[O+2]),S++;if(null!=g)for(O=0;O<g.length;O+=3)u.push("vn "+g[O]*F+" "+g[O+1]+" "+g[O+2]);if(null!=y)for(O=0;O<y.length;O+=2)u.push("vt "+y[O]+" "+y[O+1]),j++;var w=["","",""],C=(null!==(s=null!==(n=f.overrideMaterialSideOrientation)&&void 0!==n?n:null===(a=f.material)||void 0===a?void 0:a.sideOrientation)&&void 0!==s?s:f.getScene().defaultMaterial.sideOrientation)===r.Material.ClockWiseSideOrientation?[2,1]:[1,2],M=C[0],B=C[1];for(O=0;O<T.length;O+=3){var K=[String(T[O]+l),String(T[O+M]+l),String(T[O+B]+l)],_=[String(T[O]+d),String(T[O+M]+d),String(T[O+B]+d)],I=K,N=null!=y?_:w,P=null!=g?K:w;u.push("f "+I[0]+"/"+N[0]+"/"+P[0]+" "+I[1]+"/"+N[1]+"/"+P[1]+" "+I[2]+"/"+N[2]+"/"+P[2])}i&&c&&f.bakeTransformIntoVertices(c),l+=S,d+=j}else r.Tools.Warn("There are no position vertices or indices on the mesh!")}else r.Tools.Warn("No geometry is present on the mesh")}return u.join("\n")},e.MTL=function(e){var t=[],r=e.material;return t.push("newmtl mat1"),t.push("  Ns "+r.specularPower.toFixed(4)),t.push("  Ni 1.5000"),t.push("  d "+r.alpha.toFixed(4)),t.push("  Tr 0.0000"),t.push("  Tf 1.0000 1.0000 1.0000"),t.push("  illum 2"),t.push("  Ka "+r.ambientColor.r.toFixed(4)+" "+r.ambientColor.g.toFixed(4)+" "+r.ambientColor.b.toFixed(4)),t.push("  Kd "+r.diffuseColor.r.toFixed(4)+" "+r.diffuseColor.g.toFixed(4)+" "+r.diffuseColor.b.toFixed(4)),t.push("  Ks "+r.specularColor.r.toFixed(4)+" "+r.specularColor.g.toFixed(4)+" "+r.specularColor.b.toFixed(4)),t.push("  Ke "+r.emissiveColor.r.toFixed(4)+" "+r.emissiveColor.g.toFixed(4)+" "+r.emissiveColor.b.toFixed(4)),r.ambientTexture&&t.push("  map_Ka "+r.ambientTexture.name),r.diffuseTexture&&t.push("  map_Kd "+r.diffuseTexture.name),r.specularTexture&&t.push("  map_Ks "+r.specularTexture.name),r.bumpTexture&&t.push("  map_bump -imfchan z "+r.bumpTexture.name),r.opacityTexture&&t.push("  map_d "+r.opacityTexture.name),t.join("\n")},e}(),a=void 0!==o.g?o.g:"undefined"!=typeof window?window:void 0;if(void 0!==a)for(var s in e)a.BABYLON[s]=e[s];const u=t})(),i.default})()));
//# sourceMappingURL=babylon.objSerializer.min.js.map